<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador NAT</title>
    <style>
        body { font-family: Arial, sans-serif; background: #667eea; padding: 20px; margin: 0; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 12px; }
        .header { background: #667eea; color: white; padding: 30px; }
        .content { padding: 30px; }
        .section { margin-bottom: 30px; }
        .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; }
        .config-box { background: #f9fafb; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .form-group { display: flex; flex-direction: column; }
        label { font-size: 12px; font-weight: 600; color: #374151; margin-bottom: 6px; }
        input[type="text"], input[type="range"], input[type="checkbox"] { padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; }
        button { background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; width: 100%; margin-top: 15px; }
        button:hover { background: #5568d3; }
        .animation-container { background: #f3e8ff; border: 2px solid #d8b4fe; padding: 20px; margin: 20px 0; display: none; }
        .packet-flow { display: flex; margin-bottom: 20px; gap: 10px; }
        .packet-box { background: white; border: 2px solid #3b82f6; padding: 12px; flex: 1; }
        .packet-box.router { background: #4f46e5; color: white; border: none; display: flex; align-items: center; justify-content: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        thead { background: #374151; color: white; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }
        .error-alert { background: #fef2f2; border: 2px solid #dc2626; padding: 15px; margin: 15px 0; display: none; }
        .error-alert.show { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>NAT Simulator</h1>
            <p>Network Address Translation</p>
        </div>
        <div class="content">
            <div class="section">
                <div class="section-title">Configurar Paquete Saliente</div>
                <div class="config-box">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>IP Origen</label>
                            <input type="text" id="sourceIP" value="192.168.1.100">
                        </div>
                        <div class="form-group">
                            <label>Puerto Origen</label>
                            <input type="text" id="sourcePort" value="3456">
                        </div>
                        <div class="form-group">
                            <label>IP Destino</label>
                            <input type="text" id="destIP" value="8.8.8.8">
                        </div>
                        <div class="form-group">
                            <label>Puerto Destino</label>
                            <input type="text" id="destPort" value="80">
                        </div>
                    </div>
                    <button onclick="sendPacket()">Enviar Paquete</button>
                </div>
            </div>
            <div class="animation-container" id="animation"></div>
            <div class="section">
                <h2>Tabla NAT</h2>
                <table id="natTable" style="display:none;">
                    <thead><tr><th>IP Privada</th><th>Puerto Privado</th><th>IP Publica</th><th>Puerto Publico</th></tr></thead>
                    <tbody id="natBody"></tbody>
                </table>
                <div id="empty">La tabla NAT esta vacia</div>
            </div>
        </div>
    </div>
    <script>
        let natTable = [];
        let nextPort = 50000;
        
        function sendPacket() {
            const sIP = document.getElementById('sourceIP').value;
            const sPort = document.getElementById('sourcePort').value;
            const dIP = document.getElementById('destIP').value;
            const dPort = document.getElementById('destPort').value;
            
            const entry = { privateIP: sIP, privatePort: sPort, publicIP: '203.0.113.5', publicPort: nextPort, destIP: dIP, destPort: dPort };
            natTable.push(entry);
            nextPort++;
            
            updateTable();
        }
        
        function updateTable() {
            if(natTable.length === 0) {
                document.getElementById('natTable').style.display = 'none';
                document.getElementById('empty').style.display = 'block';
                return;
            }
            document.getElementById('empty').style.display = 'none';
            document.getElementById('natTable').style.display = 'table';
            
            let html = '';
            for(let e of natTable) {
                html += '<tr><td>'+e.privateIP+'</td><td>'+e.privatePort+'</td><td>'+e.publicIP+'</td><td>'+e.publicPort+'</td></tr>';
            }
            document.getElementById('natBody').innerHTML = html;
        }
    </script>
</body>
</html>
